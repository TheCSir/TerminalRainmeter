[Rainmeter]
Author=CSir
Update=01
AccurateText=1
BackgroundMode=2
SolidColor=0,0,0,1
DynamicWindowSize=1

[Metadata]
Name=PowerOpt Changer
Version=2.0

[Variables]
; ── Darkish theme (matching TerminalStart) ──
ColorBg=13,13,13
ColorFg=224,224,224
ColorMuted=119,119,119
ColorBorder=51,51,51
ColorAccent=255,255,255
ColorHover=34,34,34
FontFace=JetBrains Mono
FontSizeSm=10
FontSizeXs=9

; ── Layout ──
W=280
SkinH=76

; ── Animation ──
FRAMES=8
EXCEED=7

; ── Icons (dark theme) ──
Icon1=#CURRENTPATH#ecoD.png
Icon2=#CURRENTPATH#balanceD.png
Icon3=#CURRENTPATH#highperfD.png
Icon4=#CURRENTPATH#turboD.png
Icon5=#CURRENTPATH#gearD.png

; ── Shortcut positions (inside border) ──
X=214
Y=32r

; ── Labels ──
Choice1=Eco
Choice2=Balanced
Choice3=High Perf.
Choice4=Turbo
Choice5=Settings

; ── Bulk show/hide ──
SHOWCONTENTS=[!ShowMeter Shortcut1][!ShowMeter Shortcut2][!ShowMeter Shortcut3][!ShowMeter Shortcut4][!ShowMeter Shortcut5]
HIDECONTENTS=[!HideMeter Shortcut1][!HideMeter Shortcut2][!HideMeter Shortcut3][!HideMeter Shortcut4][!HideMeter Shortcut5]

; ═══════════════════════════════════════════
; TUIBOX BORDER
; ═══════════════════════════════════════════

; ── Background fill (inside border) ──
[MeterBg]
Meter=Image
X=0
Y=7
W=#W#
H=(#SkinH# - 8)
SolidColor=#ColorBg#

; ── Border ──
[MeterBorderTop]
Meter=Image
X=0
Y=7
W=#W#
H=1
SolidColor=#ColorBorder#

[MeterBorderBottom]
Meter=Image
X=0
Y=(#SkinH# - 1)
W=#W#
H=1
SolidColor=#ColorBorder#

[MeterBorderLeft]
Meter=Image
X=0
Y=7
W=1
H=(#SkinH# - 7)
SolidColor=#ColorBorder#

[MeterBorderRight]
Meter=Image
X=(#W# - 1)
Y=7
W=1
H=(#SkinH# - 7)
SolidColor=#ColorBorder#

; ── Title bg mask (cuts through top border) ──
[MeterTitleBg]
Meter=Image
X=8
Y=1
W=90
H=14
SolidColor=#ColorBg#

; ── Title: "power.cfg" ──
[MeterTitle]
Meter=String
X=12
Y=0
FontFace=#FontFace#
FontSize=#FontSizeSm#
FontWeight=700
FontColor=#ColorMuted#
StringAlign=Left
StringCase=Lower
AntiAlias=1
Text=power.cfg
MouseOverAction=[!SetOption MeterTitle FontColor "#ColorAccent#"][!UpdateMeter MeterTitle][!Redraw]
MouseLeaveAction=[!SetOption MeterTitle FontColor "#ColorMuted#"][!UpdateMeter MeterTitle][!Redraw]

; ═══════════════════════════════════════════
; ANIMATION MEASURES
; ═══════════════════════════════════════════

[CLOSED]
Measure=Calc
Formula=0

[OPENED]
Measure=Calc
Formula=#FRAMES#

[STOP]
Measure=Calc
Formula=Counter

[HOLD]
Measure=Calc
Formula=HOLD = 0 ? STOP : HOLD
Disabled=1

[RESET]
Measure=Calc
Formula=STOP - HOLD
IfAboveValue=#EXCEED#
IfAboveAction=[!DisableMeasure HOLD]

[FORWARD]
Measure=Calc
MinValue=0
MaxValue=#FRAMES#
Formula=(STOP-HOLD < #FRAMES#) ? STOP-HOLD : 0
IfEqualValue=#EXCEED#
IfEqualAction=[!ShowMeter Aopened][!HideMeter Aforward][!DisableMeasure FORWARD][!ShowMeter Aclose]#SHOWCONTENTS#[!DisableMeasure HOLD][!Redraw]
Disabled=1

[REVERSE]
Measure=Calc
MinValue=0
MaxValue=#FRAMES#
Formula=(STOP-HOLD < #FRAMES#) ? #FRAMES#-(STOP-HOLD) : #EXCEED#
IfEqualValue=1
IfEqualAction=[!HideMeter Areverse][!DisableMeasure REVERSE][!ShowMeter Aopen][!DisableMeasure HOLD][!Redraw]
Disabled=1

; ── "PLAN :" label (left side) ──
[MeterPlanLabel]
Meter=String
X=14
Y=32
FontFace=#FontFace#
FontSize=#FontSizeXs#
FontWeight=400
FontColor=#ColorMuted#
StringAlign=Left
AntiAlias=1
Text=POWER PLAN :

; ═══════════════════════════════════════════
; ORIGINAL WIDGET CONTENT (offset +16x, +14y)
; ═══════════════════════════════════════════

; ── Main bar (collapsed state) ──
[Main]
Meter=IMAGE
ImageName=#CURRENTPATH#MainD.png
X=106
Y=14
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0

; ── Animation frames ──
[Aforward]
Meter=BITMAP
MeasureName=FORWARD
BitmapImage=#CURRENTPATH#AnimationD.png
X=180
Y=60
BitmapFrames=#FRAMES#
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0
Hidden=1

[Areverse]
Meter=BITMAP
MeasureName=REVERSE
BitmapImage=#CURRENTPATH#AnimationD.png
X=180
Y=60
BitmapFrames=#FRAMES#
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0
Hidden=1

[Aopened]
Meter=BITMAP
MeasureName=OPENED
BitmapImage=#CURRENTPATH#AnimationD.png
X=180
Y=60
BitmapFrames=#FRAMES#
BitmapZeroFrame=1
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0
Hidden=1

; ── Expand trigger ──
[Aopen]
Meter=IMAGE
ImageName=#CURRENTPATH#BGD.png
X=206
Y=40
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0
LeftMouseDownAction=[!HideMeter Aopen][!EnableMeasure HOLD][!EnableMeasure FORWARD][!ShowMeter Aforward][!HideMeter TitleText][!Redraw]

; ── Collapse trigger ──
[Aclose]
Meter=IMAGE
ImageName=#CURRENTPATH#BG0D.png
X=206
Y=220
ColorMatrix1=0.7;0;0;0;0
ColorMatrix2=0;0.7;0;0;0
ColorMatrix3=0;0;0.7;0;0
LeftMouseDownAction=#HIDECONTENTS#[!HideMeter Aclose][!EnableMeasure HOLD][!EnableMeasure REVERSE][!ShowMeter Areverse][!ShowMeter TitleText][!HideMeter Aopened]
Hidden=1

; ═══════════════════════════════════════════
; TOOLTIP LABELS (shown on icon hover)
; ═══════════════════════════════════════════

[1S]
Meter=String
FontFace=#FontFace#
FontSize=#FontSizeXs#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=#Choice1#
AntiAlias=1
Hidden=1

[2S]
Meter=String
FontFace=#FontFace#
FontSize=#FontSizeXs#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=#Choice2#
AntiAlias=1
Hidden=1

[3S]
Meter=String
FontFace=#FontFace#
FontSize=#FontSizeXs#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=#Choice3#
AntiAlias=1
Hidden=1

[4S]
Meter=String
FontFace=#FontFace#
FontSize=#FontSizeXs#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=#Choice4#
AntiAlias=1
Hidden=1

[5S]
Meter=String
FontFace=#FontFace#
FontSize=#FontSizeXs#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=#Choice5#
AntiAlias=1
Hidden=1

; ── Title text (visible when collapsed) ──
[TitleText]
Meter=STRING
FontFace=#FontFace#
FontSize=#FontSizeSm#
StringAlign=CENTER
FontColor=#ColorMuted#
X=156
Y=32
Text=
AntiAlias=1
StringStyle=BOLD

; ═══════════════════════════════════════════
; SHORTCUT ICONS (no system commands)
; ═══════════════════════════════════════════

[Shortcut1]
Meter=IMAGE
ImageName=#Icon1#
ColorMatrix1=-1;0;0;0;0
ColorMatrix2=0;-1;0;0;0
ColorMatrix3=0;0;-1;0;0
ColorMatrix5=1;1;1;0;0
X=#X#
Y=66
Hidden=1
MouseOverAction=[!ShowMeter 1S][!Redraw]
MouseLeaveAction=[!HideMeter 1S][!Redraw]

[Shortcut2]
Meter=IMAGE
ImageName=#Icon2#
ColorMatrix1=-1;0;0;0;0
ColorMatrix2=0;-1;0;0;0
ColorMatrix3=0;0;-1;0;0
ColorMatrix5=1;1;1;0;0
X=#X#
Y=#Y#
Hidden=1
MouseOverAction=[!ShowMeter 2S][!Redraw]
MouseLeaveAction=[!HideMeter 2S][!Redraw]

[Shortcut3]
Meter=IMAGE
ImageName=#Icon3#
ColorMatrix1=-1;0;0;0;0
ColorMatrix2=0;-1;0;0;0
ColorMatrix3=0;0;-1;0;0
ColorMatrix5=1;1;1;0;0
X=#X#
Y=#Y#
Hidden=1
MouseOverAction=[!ShowMeter 3S][!Redraw]
MouseLeaveAction=[!HideMeter 3S][!Redraw]

[Shortcut4]
Meter=IMAGE
ImageName=#Icon4#
ColorMatrix1=-1;0;0;0;0
ColorMatrix2=0;-1;0;0;0
ColorMatrix3=0;0;-1;0;0
ColorMatrix5=1;1;1;0;0
X=#X#
Y=#Y#
Hidden=1
MouseOverAction=[!ShowMeter 4S][!Redraw]
MouseLeaveAction=[!HideMeter 4S][!Redraw]

[Shortcut5]
Meter=IMAGE
ImageName=#Icon5#
ColorMatrix1=-1;0;0;0;0
ColorMatrix2=0;-1;0;0;0
ColorMatrix3=0;0;-1;0;0
ColorMatrix5=1;1;1;0;0
X=#X#
Y=#Y#
Hidden=1
MouseOverAction=[!ShowMeter 5S][!Redraw]
MouseLeaveAction=[!HideMeter 5S][!Redraw]
